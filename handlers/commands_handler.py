from aiogram import Router, types
from aiogram.filters import CommandStart, Command
from sqlalchemy.ext.asyncio import AsyncSession

from data.user_table import add_user
from data.weather_city_table import add_city
from keyboards.replay_keyboards import get_main_keyboard

command_router = Router()


@command_router.message(CommandStart())
async def start_command(message: types.Message, session: AsyncSession):
    await add_user(session, message)
    await add_city(session, message)
    main_menu = await get_main_keyboard()
    await message.answer(
        f"–ü—Ä–∏–≤–µ—Ç {message.from_user.first_name}!\n"
        "ü§ñ–Ø AI –ø–æ–º–æ—â–Ω–∏–∫ –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥–∞.\n"
        "–Ø –∑–Ω–∞—é –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –æ—Ç –Ø–Ω–¥–µ–∫—Å –¥–∏—Ä–µ–∫—Ç, –¥–æ CRM —Å–∏—Å—Ç–µ–º –∏ —Å–ø–æ—Å–æ–±–µ–Ω –ø–æ–º–æ—á—å —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π. "
        "–Ø –º–æ–≥—É –Ω–∞–ø–∏—Å–∞—Ç—å –∫–∞–∫ –ø—Ä–æ–¥–∞—é—â–∏–µ —Ç–µ–∫—Å—Ç—ã –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π, —Ç–∞–∫ –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ SEO —Å—Ç–∞—Ç—å–∏. "
        "–û—Ç–≤–µ—á—É –Ω–∞ –ª—é–±—ã–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –º–∞—Ä–∫–µ—Ç–∏–Ω–≥—É –∏ –ø–æ–¥–∫—Ä–µ–ø–ª—é –æ—Ç–≤–µ—Ç —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –Ω—É–∂–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã.\n"
        "–ü–æ–º–æ–≥—É —Å –∞–Ω–∞–ª–∏–∑–æ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, –ø—Ä–æ–≤–µ—Ä—é —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä—ã–Ω–∫–∞ –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ!\n"
        "‚õî–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é —è –ø–æ–∫–∞ –Ω–µ —É–º–µ—é –≤–µ—Å—Ç–∏ –¥–∏–∞–ª–æ–≥–∏ –∏ –æ—Ç–≤–µ—á–∞—é –≤ —Ñ–æ—Ä–º–∞—Ç–µ '–í–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç', "
        "–Ω–æ —Å–∫–æ—Ä–æ –Ω–∞—É—á—É—Å—å, –∞ –µ—â–µ –º–æ–π"
        " –∫–æ–∂–∞–Ω—ã–π —Å–æ–∑–¥–∞—Ç–µ–ª—å –æ–±–µ—â–∞–ª –≤ —Å–∫–æ—Ä–æ–º –±—É–¥—É—â–µ–º –Ω–∞—É—á–∏—Ç—å –º–µ–Ω—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.\n"
        "–Ø —Ç–∞–∫–∂–µ –º–æ–≥—É –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã üå¶Ô∏è\n"
        "–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç üí±\n"
        "–í—ã–±–µ—Ä–∏ –Ω—É–∂–Ω—ã–π –ø—É–Ω–∫—Ç –º–µ–Ω—é, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å!üöÄ",
        reply_markup=main_menu,
    )


@command_router.message(Command("help"))
async def help_command(message: types.Message):
    await message.answer("–í–æ—Ç —á—Ç–æ —è —É–º–µ—é: üåü\n"
                         "\n"
                         "/start üöÄ: –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º.\n"
                         "/help : –ü–æ–º–æ—â—å.\n"
                         "–û—Å–Ω–æ–≤–Ω–æ–µ –º–µ–Ω—é:\n"
                         "'üå§–£–∑–Ω–∞—Ç—å –ø–æ–≥–æ–¥—É' –ü–æ–∫–∞–∂–µ—Ç –ø–æ–≥–æ–¥—É.\n"
                         "'üí∞–ö—É—Ä—Å –≤–∞–ª—é—Ç' –ü–æ–∫–∞–∂–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç.\n"
                         "ü§ñAI –ø–æ–º–æ—â–Ω–∏–∫ –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥–∞\n"
                         )


